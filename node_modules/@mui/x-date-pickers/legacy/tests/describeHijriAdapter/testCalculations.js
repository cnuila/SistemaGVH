import { expect } from 'chai';
import { TEST_DATE_ISO } from '../describeGregorianAdapter';
export var testCalculations = function testCalculations(_ref) {
  var adapter = _ref.adapter,
    testDate = _ref.testDate;
  it('Method: date', function () {
    expect(adapter.date(null)).to.equal(null);
  });
  it('Method: parse', function () {
    expect(adapter.parse('', 'iYYYY/iM/iD')).to.equal(null);
    expect(adapter.parse('01/01/1395', 'iYYYY/iM/iD')).not.to.equal(null);
  });
  it('Method: isEqual', function () {
    var anotherDate = adapter.date(TEST_DATE_ISO);
    expect(adapter.isEqual(testDate, anotherDate)).to.equal(true);
    expect(adapter.isEqual(null, null)).to.equal(true);
  });
  it('Method: isAfterYear', function () {
    var afterYear = adapter.addYears(testDate, 2);
    expect(adapter.isAfterYear(afterYear, testDate)).to.equal(true);
  });
  it('Method: isBeforeYear', function () {
    var afterYear = adapter.addYears(testDate, 2);
    expect(adapter.isBeforeYear(testDate, afterYear)).to.equal(true);
  });
  it('Method: startOfYear', function () {
    expect(adapter.startOfYear(testDate)).toEqualDateTime(new Date('2018-09-11T00:00:00.000Z'));
  });
  it('Method: startOfMonth', function () {
    expect(adapter.startOfMonth(testDate)).toEqualDateTime(new Date('2018-10-10T00:00:00.000Z'));
  });
  it('Method: endOfYear', function () {
    expect(adapter.endOfYear(testDate)).toEqualDateTime(new Date('2019-08-30T23:59:59.999Z'));
  });
  it('Method: endOfMonth', function () {
    expect(adapter.endOfMonth(testDate)).toEqualDateTime(new Date('2018-11-08T23:59:59.999Z'));
  });
  it('Method: getYear', function () {
    expect(adapter.getYear(testDate)).to.equal(1440);
  });
  it('Method: getMonth', function () {
    expect(adapter.getMonth(testDate)).to.equal(1);
  });
  it('Method: getDate', function () {
    expect(adapter.getDate(testDate)).to.equal(21);
  });
  it('Method: setYear', function () {
    expect(adapter.setYear(testDate, 1441)).toEqualDateTime(new Date('2019-10-20T11:44:00.000Z'));
  });
  it('Method: setDate', function () {
    expect(adapter.setDate(testDate, 22)).toEqualDateTime(new Date('2018-10-31T11:44:00.000Z'));
  });
  it('Method: getNextMonth', function () {
    expect(adapter.getNextMonth(testDate)).toEqualDateTime(new Date('2018-11-29T11:44:00.000Z'));
  });
  it('Method: getPreviousMonth', function () {
    expect(adapter.getPreviousMonth(testDate)).toEqualDateTime(new Date('2018-10-01T11:44:00.000Z'));
  });
  it('Method: getWeekdays', function () {
    expect(adapter.getWeekdays()).to.deep.equal(['ح', 'ن', 'ث', 'ر', 'خ', 'ج', 'س']);
  });
  it('Method: getWeekArray', function () {
    var weekArray = adapter.getWeekArray(testDate);
    var expectedDate = new Date('2018-10-07T00:00:00.000Z');
    weekArray.forEach(function (week) {
      week.forEach(function (day) {
        expect(day).toEqualDateTime(expectedDate);
        expectedDate.setDate(expectedDate.getDate() + 1);
      });
    });
  });
  it('Method: getWeekNumber', function () {
    expect(adapter.getWeekNumber(testDate)).to.equal(8);
  });
  describe('Method: getYearRange', function () {
    it('Minimum limit', function () {
      var anotherYear = adapter.setYear(testDate, 1355);
      expect(function () {
        return adapter.getYearRange(anotherYear, testDate);
      }).to.throw('min date must be on or after 1356-01-01 H (1937-03-14)');
    });
    it('Maximum limit', function () {
      var anotherYear = adapter.setYear(testDate, 1500);
      expect(function () {
        return adapter.getYearRange(testDate, anotherYear);
      }).to.throw('max date must be on or before 1499-12-29 H (2076-11-26)');
    });
  });
  it('Method: getYearRange', function () {
    var anotherDate = adapter.setYear(testDate, 1445);
    var yearRange = adapter.getYearRange(testDate, anotherDate);
    expect(yearRange).to.have.length(6);
  });
};